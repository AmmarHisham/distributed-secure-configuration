<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


		<title>Manage distributed configuration and secrets with Spring Cloud and Vault</title>
        <meta name="description" content="Manage distributed configuration and secrets with Spring Cloud and Vault">
        <meta name="author" content="Andreas Falk">

        <link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/beige.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

        <link rel="stylesheet" href = "http://slidifylibraries2.googlecode.com/git/inst/libraries/widgets/bootstrap/css/bootstrap.css">


        <!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

                <!-- Introduction -->
                <section data-background="images/springio.png" data-background-size="90%">
                    <h3>Manage distributed configuration and secrets with Spring Cloud and Vault</h3>
                    <p>Friday 19th May, 2017</p>
                </section>
                <section data-background="images/novatec-back.png">
                    <h3 style="color: white">Andreas Falk</h3>
                    <p>http://www.novatec-gmbh.de</p>
                    <p>andreas.falk@novatec-gmbh.de</p>
                    <p>@NT_AQE, @andifalk</p>
                    <img class="plain" src="images/portfolio.png" width="55%">
                </section>
                <section data-background="images/evolution.png" data-background-size="75%">

                    <!--<img src="images/evolution.png" class="plain" width="75%">-->
                </section>
                <section data-background="images/springproperties.png" data-background-size="85%">
                </section>
                <section>
                    <h3>A6: Sensitive Data Exposure</h3>
                    <img src="images/owasp_top_10_2017.png" class="plain" width="40%" height="40%">
                    <p><small><a href="https://github.com/OWASP/Top10">https://github.com/OWASP/Top10</a></small></p>
                </section>
                <section data-background="images/key_heart.jpg">
                    <h2>Typical sensitive data</h2>
                    <h3 style="color: black" class="fragment fade-up">Passwords</h3>
                    <h3 style="color: black" class="fragment fade-up">Database credentials</h3>
                    <h3 style="color: black" class="fragment fade-up">OAuth2 client secrets</h3>
                    <h3 style="color: black" class="fragment fade-up">Encryption keys</h3>
                    <h3 style="color: black" class="fragment fade-up">Sensitive user data</h3>
                    <h3 style="color: black" class="fragment fade-up">Credit card numbers</h3>
                </section>
                <section>
                    <h2>Application Properties</h2>
                    <h4>Database access credentials</h4>
                    <pre><code class="properties" data-trim>
                        spring.datasource.url=jdbc:postgresql://localhost/test
                        spring.datasource.username=root
                        spring.datasource.password=mysupersecretpassword
                    </code></pre>
                </section>

                <!-- Spring Cloud Config -->

                <section>
                    <section data-background="images/cloud.jpg">
                        <h1>Spring Cloud Config</h1>
                        <img src="images/spring-cloud.png" class="plain">
                        <p>
                        <small><a style="color: black" href="https://cloud.spring.io/spring-cloud-config">
                            https://cloud.spring.io/spring-cloud-config</a></small>
                        </p>
                    </section>
                    <section>
                        <h2>Official Description</h2>
                        <blockquote cite="https://cloud.spring.io/spring-cloud-config">
                            &ldquo;Spring Cloud Config provides server and client-side support for externalized configuration
                            in a distributed system.
                            <p>
                            With the Config Server you have a central place to manage external properties for
                            applications across all environments...&rdquo;
                        </blockquote>
                        <small><a href="https://cloud.spring.io/spring-cloud-config">
                            https://cloud.spring.io/spring-cloud-config</a></small>
                        <aside class="notes">
                            Spring Cloud Config
                        </aside>
                    </section>
                    <section data-background="images/springcloudconfig.png" data-background-size="85%">
                    </section>
                    <section>
                        <h2>Start with a new config server</h2>
                        <img src="images/start-spring-io-config-server.png">
                    </section>
                    <section>
                        <h2>Spring Cloud Config Server</h2>
                        <h4>Just one additional annotation</h4>
                        <pre><code class="java" data-trim>
                            @EnableConfigServer
                            @SpringBootApplication
                            public class ConfigServerApplication {

                                public static void main(String[] args) {
                                    SpringApplication.run(
                                        ConfigServerApplication.class, args);
                                }
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h2>Spring Cloud Config Server</h2>
                        <h4>Configuration</h4>
                        <pre><code class="properties" data-trim>
                            spring.cloud.config.server.git.uri=
                                https://github.com/andifalk/cloud-config-repository
                            server.port=8888
                            security.basic.enabled=true
                            security.user.name=admin
                            security.user.password=secret
                        </code></pre>
                        <p class="fragment" data-code-focus="1-2">
                            Location of git repository
                        </p>
                    </section>
                    <section data-background="images/demo.jpg" data-background-size="100%">
                        <h1>Demo</h1>
                    </section>
                </section>

                <!-- Spring Cloud Config Server with encryption -->

                <section>
                    <section data-background="images/cloud.jpg">
                        <h1>Spring Cloud Config</h1>
                        <h2>Encryption and Decryption</h2>
                        <img src="images/secure_spring_cloud.png" class="plain">
                        <p>
                            <small><a style="color: black" href="https://cloud.spring.io/spring-cloud-config">
                                https://cloud.spring.io/spring-cloud-static/Dalston.RELEASE/#_security</a></small>
                        </p>
                    </section>
                    <section>
                        <h2>Spring Cloud Config Server</h2>
                        <h4>Symmetric Key Configuration</h4>
                        <pre><code class="properties" data-trim>
                            encrypt.key=MyVerySecureEncryptionKey
                        </code></pre>
                    </section>
                    <section>
                        <h2>Spring Cloud Config Server</h2>
                        <h4>Key Store Configuration</h4>
                        <pre><code class="properties" data-trim>
                            encrypt.key-store.location=classpath:configserver.jks
                            encrypt.key-store.alias=configserver
                            encrypt.key-store.password=secret
                            encrypt.key-store.secret=secret
                        </code></pre>
                    </section>
                    <section>
                        <h2>Spring Cloud Config Server</h2>
                        <h4>Key Store Configuration</h4>
                        <pre><code class="shellsession" data-trim>
                            curl -u admin:secret -d test http://localhost:8888/encrypt
                            AQCe+RE4Kk4aifIDeEdUvhjGyK/UptHkr4KwWh5eLQOzbqSeknnM1qhPqdrjyUR4o
                            aI/DhoUjfjVxyjRupwNs50V/Q3XXb9mP97Jt8AwYLUWa/p0Sas2Li18ZOAOlCbB6Z
                            UdiIfFPDZ43pu1NvGB9oqgmAMiD5A0bBbaUmnjmmbxlYR3oFOZWUY5jiGwYHCGDpT
                            BCx8EftOlu8PcD5+DrXsCeuYyjnYNOuBl2YnqFgT1qYmDqz4mq/egrceq1xyxoIsS
                            ab/It7BYayd2pBwY2PUQ0bmwd5YVTampqOwhV2i74Z8yx6ip7KICz746dkO2yjm1C
                            +zKFwxg/gJakis/MrTq1cG5hprXo400UrerYgYA6ZRi3VCP8eVeEAdsvHB1j1w=
                        </code></pre>
                    </section>
                    <section data-background="images/babuschka.jpg">
                        <h1 style="color: white">Key Management</h1>
                    </section>
                    <section data-background="images/demo.jpg" data-background-size="100%">
                        <h1>Demo</h1>
                    </section>
                </section>

                <!-- Vault -->

                <section>
                    <section data-background="images/safe.jpg" data-background-size="100%">
                        <h1 style="color: white">Vault</h1>
                    </section>
                    <section>
                        <img src="images/hashicorp_vault.png" class="plain">
                        <br>
                            <small><a style="color: black" href="https://www.vaultproject.io/">
                                https://www.vaultproject.io/</a></small>
                        <h3 class="fragment">Secret Storage</h3>
                        <h3 class="fragment">Key Revocation</h3>
                        <h3 class="fragment">Key Rolling</h3>
                        <h3 class="fragment">Audit Logs</h3>
                    </section>
                    <section data-background="images/vault_architecture.png" data-background-size="99%">
                    </section>
                    <section>
                        <h1>Secret Storage</h1>
                        <h3 class="fragment">Encryption (AES cypher)</h3>
                        <h3 class="fragment">Dynamic Secrets</h3>
                        <h3 class="fragment">Access control policies</h3>
                        <h3 class="fragment">Lease time (automatic revocation)</h3>
                    </section>
                    <section>
                        <h1>Audit Logs</h1>
                        <h3 class="fragment">Not active by default</h3>
                        <h3 class="fragment">Client interaction</h3>
                        <h3 class="fragment">Sensitive data hashed (HMAC-SHA256)</h3>
                        <h3 class="fragment">Targets: File, Syslog, Socket</h3>
                    </section>
                </section>

                <!-- Spring Cloud Vault Config -->
                <section>
                    <section>
                        <h1>Spring Cloud Vault Config</h1>
                    </section>
                    <section data-background="images/africa.jpg">
                        <h2 style="color: white">Rotate, Repair, Repave</h2>
                        <h4 style="color: whitesmoke">Justin Smith</h4>
                        <blockquote style="color: white" cite="https://thenewstack.io/cloud-foundrys-approach-security-rotate-repair-repave">
                            &ldquo;What if every server inside
                            my data center had a maximum lifetime
                            of two hours?
                            This approach would frustrate malware writers...&rdquo;
                        </blockquote>
                    </section>
                </section>

                <!-- The end -->
                <section data-background="images/key.jpg">
                    <p>http://www.novatec-gmbh.de</br>
                    http://blog.novatec-gmbh.de</p>
                    <p>andreas.falk@novatec-gmbh.de</p>
                    <img src="images/twitter.png" width="50px" class="plain">
                    <p>@NT_AQE, @andifalk</p>
                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>


		<script>
			Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,
                slideNumber: 'c',

                allottedTime: 45 * 60 * 1000, // 45 minutes

                transition: 'slide', // none/fade/slide/convex/concave/zoom
				dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
                    { src: 'plugin/print-pdf/print-pdf.js' },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true },
                    { src: 'plugin/tagcloud/tagcloud.js', async: true },
                    { src: 'plugin/elapsed-time-bar/elapsed-time-bar.js'},
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() {
					    hljs.initHighlightingOnLoad(); }
					}
				]
			});
		</script>
	</body>
</html>
